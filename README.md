<div align="center">
    <img src="https://raw.githubusercontent.com/palemoky/fight-the-landlord/main/docs/logo.png" alt="Logo" height="100px" />

# ğŸ® æ¬¢ä¹æ–—åœ°ä¸»

**ä¸€ä¸ªçœŸæ­£å…¬å¹³çš„æ–—åœ°ä¸»æ¸¸æˆ - æ— æ§ç‰Œã€æ— ç®—æ³•æ“æ§ã€çº¯ç²¹çš„è¿æ°”ä¸æŠ€å·§**

åŸºäº Go è¯­è¨€å®ç°çš„æ–—åœ°ä¸»æ¸¸æˆï¼Œæ”¯æŒè”ç½‘å¯¹æˆ˜ã€æ–­çº¿é‡è¿ã€æ’è¡Œæ¦œç­‰åŠŸèƒ½ã€‚

</div>

## ğŸ’¡ é¡¹ç›®åˆè¡·

åŒå€¦äº†å•†ä¸šæ–—åœ°ä¸»æ¸¸æˆçš„æ§ç‰Œæœºåˆ¶ï¼Ÿæˆ‘ä¹Ÿæ˜¯ã€‚

åœ¨æŸäº›çŸ¥åæ–—åœ°ä¸»æ¸¸æˆä¸­ï¼Œæ–°æ‰‹æˆ–å›å½’ç©å®¶åˆšå¼€å§‹ä¼šè·å¾—å¥½ç‰Œï¼ŒåŒ¹é…è±†å­å°‘çš„å¯¹æ‰‹ï¼Œè¥é€ "è¿èƒœ"çš„é”™è§‰ã€‚ä½†éšç€æ¸¸æˆæ—¶é—´å¢é•¿ï¼Œç‰Œè´¨é‡æ˜æ˜¾ä¸‹é™ï¼Œä¸”é¢‘ç¹åŒ¹é…é«˜æ®µä½ç©å®¶ï¼Œå¯¼è‡´å¿«é€Ÿè¾“å…‰è±†å­ã€‚è¿™ç§ç®—æ³•æ“æ§ä¸¥é‡ç ´åäº†æ¸¸æˆçš„å…¬å¹³æ€§å’Œçº¯ç²¹æ€§ã€‚

**æœ¬é¡¹ç›®æ‰¿è¯º**ï¼š

- âœ… **çœŸéšæœºå‘ç‰Œ**ï¼šä½¿ç”¨ `crypto/rand` åŠ å¯†çº§éšæœºæ•°ï¼Œæ— ä»»ä½•æ§ç‰Œç®—æ³•
- âœ… **å…¬å¹³åŒ¹é…**ï¼šä¸è€ƒè™‘èƒœç‡ã€æ®µä½ã€æ¸¸æˆæ—¶é•¿ï¼Œçº¯éšæœºæˆ–æˆ¿é—´åŒ¹é…
- âœ… **å¼€æºé€æ˜**ï¼šæ‰€æœ‰ä»£ç å…¬å¼€ï¼Œæ¬¢è¿å®¡è®¡å’Œè´¡çŒ®
- âœ… **æ— å†…è´­æ— å¹¿å‘Š**ï¼šçº¯ç²¹çš„æ¸¸æˆä½“éªŒï¼ŒæŠ€å·§å†³å®šèƒœè´Ÿ

> **æ ¸å¿ƒç†å¿µ**ï¼šæ–—åœ°ä¸»åº”è¯¥æ˜¯è¿æ°”ä¸æŠ€å·§çš„åšå¼ˆï¼Œè€Œä¸æ˜¯ç®—æ³•ä¸é’±åŒ…çš„è¾ƒé‡ã€‚

## ğŸ“¸ æ¸¸æˆæˆªå›¾

<div align="center">
  <img src="https://raw.githubusercontent.com/palemoky/fight-the-landlord/main/docs/lobby.png" alt="Lobby" width="45%" />
  <img src="https://raw.githubusercontent.com/palemoky/fight-the-landlord/main/docs/in-game.png" alt="In Game" width="45%" />
</div>

## âœ¨ åŠŸèƒ½ç‰¹æ€§

| åŠŸèƒ½        | è¯´æ˜                                                   |
| ----------- | ------------------------------------------------------ |
| ğŸ¯ å®æ—¶å¯¹æˆ˜ | WebSocket å®æ—¶é€šä¿¡ï¼Œæ”¯æŒå¤§è§„æ¨¡å¹¶å‘å¯¹æˆ˜ï¼ˆæ¯å±€ 3 äººï¼‰    |
| ğŸ  æˆ¿é—´ç³»ç»Ÿ | åˆ›å»ºæˆ¿é—´ã€åŠ å…¥æˆ¿é—´ã€å¿«é€ŸåŒ¹é…                           |
| ğŸ”„ æ–­çº¿é‡è¿ | ç½‘ç»œæ³¢åŠ¨æ—¶è‡ªåŠ¨é‡è¿ï¼Œæ¸¸æˆçŠ¶æ€å®Œæ•´æ¢å¤                   |
| â¸ï¸ ç¦»çº¿ç­‰å¾… | å¯¹æ‰‹æ‰çº¿æ—¶æš‚åœè®¡æ—¶ï¼Œç­‰å¾…é‡è¿                           |
| ğŸ† æ’è¡Œæ¦œ   | ç§¯åˆ†ç³»ç»Ÿã€èƒœç‡ç»Ÿè®¡ã€å®æ—¶æ’å                           |
| ğŸ“² èŠå¤©ç³»ç»Ÿ | æ”¯æŒå¤§å…èŠå¤©ã€æˆ¿é—´å¿«æ·æ¶ˆæ¯ï¼Œäº’åŠ¨æ›´ä¾¿æ·                 |
| ğŸ”’ å®‰å…¨é˜²æŠ¤ | æ¥æºéªŒè¯ã€é€Ÿç‡é™åˆ¶ã€IP è¿‡æ»¤                            |
| ğŸ³ å®¹å™¨éƒ¨ç½² | Docker Compose ä¸€é”®éƒ¨ç½²                                |
| ğŸ”„ ä¼˜é›…å‡çº§ | ç»´æŠ¤æ¨¡å¼ + é›¶åœæœºå‘ç‰ˆï¼Œç­‰å¾…æ¸¸æˆç»“æŸåè‡ªåŠ¨å…³é—­          |
| âš¡ æµé‡ä¼˜åŒ– | Protocol Buffers ~~+WebSocket~~ å‹ç¼©ï¼ŒèŠ‚çœ 60-80% æµé‡ |
| ğŸš€ æ€§èƒ½ä¼˜åŒ– | `sync.Pool` å¯¹è±¡æ± å¤ç”¨ï¼Œé™ä½ GC å‹åŠ›ï¼Œæå‡å¹¶å‘æ€§èƒ½     |
| ğŸ“ æ—¥å¿—è®°å½• | æ–‡ä»¶è®°å½•æ—¥å¿—ï¼Œä¾¿äºè°ƒè¯•å’Œé—®é¢˜è¿½è¸ª                       |

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®¢æˆ·ç«¯å®‰è£…

**macOS / Linux**ï¼š

```bash
curl -fsSL https://raw.githubusercontent.com/palemoky/fight-the-landlord/main/install.sh | bash
```

**Windows (PowerShell)**ï¼š

```powershell
irm https://raw.githubusercontent.com/palemoky/fight-the-landlord/main/install.ps1 | iex
```

**è¿è¡Œå®¢æˆ·ç«¯**ï¼š

```bash
fight-the-landlord
```

### æœåŠ¡ç«¯éƒ¨ç½²

**ä½¿ç”¨ Docker Composeï¼ˆæ¨èï¼‰**ï¼š

```bash
# 1. åˆ›å»ºé¡¹ç›®ç›®å½•
mkdir fight-the-landlord && cd fight-the-landlord

# 2. ä¸‹è½½é…ç½®æ–‡ä»¶
curl -fsSL https://raw.githubusercontent.com/palemoky/fight-the-landlord/main/docker-compose.yml -o docker-compose.yml
curl -fsSL https://raw.githubusercontent.com/palemoky/fight-the-landlord/main/.env.example -o .env

# 3. ä¿®æ”¹é…ç½®ï¼ˆå¯é€‰ï¼‰
vim .env

# 4. å¯åŠ¨æœåŠ¡
docker compose up -d

# 5. åœæ­¢æœåŠ¡
docker compose down
```

ğŸ’¡ æ¨èä½¿ç”¨ [lazydocker](https://github.com/jesseduffield/lazydocker) ç®¡ç†æœåŠ¡

### æœ¬åœ°å¼€å‘

```bash
# 1. å¯åŠ¨ Redis
redis-server

# 2. å¯åŠ¨æœåŠ¡ç«¯
go run ./cmd/server

# 3. å¯åŠ¨å®¢æˆ·ç«¯ï¼ˆå¼€ 3 ä¸ªç»ˆç«¯ï¼‰
go run ./cmd/client
```

## ğŸ² æ¸¸æˆç©æ³•

### æ¸¸æˆæ“ä½œ

| é˜¶æ®µ   | æ“ä½œ                                  |
| ------ | ------------------------------------- |
| å«åœ°ä¸» | è¾“å…¥ `Y` å«åœ°ä¸»ï¼Œ`N` ä¸å«             |
| å‡ºç‰Œ   | è¾“å…¥ç‰Œé¢ï¼Œå¦‚ `33344`ã€`345678`ã€`JQK` |
| ä¸å‡º   | è¾“å…¥ `PASS` æˆ– `P`                    |

### ç‰Œå‹ç¤ºä¾‹

```
å•å¼ : 3, K, 2
å¯¹å­: 33, KK
ä¸‰å¼ : 333
ä¸‰å¸¦ä¸€: 3334
ä¸‰å¸¦äºŒ: 33344
é¡ºå­: 34567 (5å¼ +)
è¿å¯¹: 334455 (3å¯¹+)
é£æœº: 333444 (2è¿ä¸‰+)
é£æœºå¸¦å•: 33344456
é£æœºå¸¦å¯¹: 3334445566
å››å¸¦äºŒ: 333345
å››å¸¦ä¸¤å¯¹: 33334455
ç‚¸å¼¹: 3333
ç‹ç‚¸: å°ç‹å¤§ç‹
```

## ğŸ—ï¸ æ¶æ„ä¸æµç¨‹

### ç³»ç»Ÿæ¶æ„

```mermaid
graph TD
    subgraph Clients [å®¢æˆ·ç«¯]
        C1[TUI Client 1]
        C2[TUI Client 2]
        C3[TUI Client 3]
    end

    subgraph Server [æœåŠ¡å±‚]
        WH[WebSocket Handler]
        GM[Game Session]
        RM[Room Manager]
        MM[Match Maker]
        LB[Leaderboard]
    end

    subgraph Storage [å­˜å‚¨]
        Redis[(Redis)]
    end

    C1 <--> WH
    C2 <--> WH
    C3 <--> WH

    WH --> RM
    WH --> GM
    WH --> MM
    WH --> LB

    RM --> Redis
    MM --> Redis
    LB --> Redis
```

### æ¸¸æˆçŠ¶æ€

```mermaid
stateDiagram-v2
    [*] --> Waiting : åˆ›å»º/åŠ å…¥æˆ¿é—´
    Waiting --> Ready : 3äººé½ä¸”å…¨éƒ¨å‡†å¤‡
    Ready --> Bidding : å‘ç‰Œå®Œæˆ
    Bidding --> Playing : åœ°ä¸»ç¡®å®š
    Playing --> GameOver : æœ‰äººå‡ºå®Œç‰Œ
    GameOver --> [*] : è§£æ•£
    GameOver --> Waiting : å†æ¥ä¸€å±€
```

### å®¢æˆ·ç«¯æµç¨‹

```mermaid
graph LR
    Start(å¯åŠ¨):::setup
    Connect(è¿æ¥æœåŠ¡å™¨):::setup
    Lobby(å¤§å…ç•Œé¢):::setup

    UserSelect{ç”¨æˆ·é€‰æ‹©}:::decision

    Input(è¾“å…¥æˆ¿é—´å·):::process
    Matching(åŒ¹é…ä¸­...):::process

    Waiting(ç­‰å¾…ç•Œé¢):::process
    GameScreen(æ¸¸æˆç•Œé¢):::game

    GameOver{æ¸¸æˆç»“æŸ}:::decision

    %% --- è¿æ¥æµç¨‹ ---
    %% å¯åŠ¨æµç¨‹
    Start --> Connect --> Lobby --> UserSelect

    %% åˆ†æ”¯æµç¨‹
    UserSelect -- åˆ›å»ºæˆ¿é—´ --> Waiting
    UserSelect -- åŠ å…¥æˆ¿é—´ --> Input --> Waiting
    UserSelect -- å¿«é€ŸåŒ¹é… --> Matching --> Waiting

    %% æ¸¸æˆæµç¨‹
    Waiting --> GameScreen --> GameOver

    %% å¾ªç¯/è¿”å›æµç¨‹
    GameOver -- å†æ¥ä¸€å±€ --> Waiting
    GameOver -- è¿”å›å¤§å… --> Lobby
```

## ğŸ† ç§¯åˆ†è§„åˆ™

| ç»“æœ        | ç§¯åˆ† |
| ----------- | ---- |
| åœ°ä¸»èƒœåˆ©    | +30  |
| å†œæ°‘èƒœåˆ©    | +15  |
| åœ°ä¸»å¤±è´¥    | -20  |
| å†œæ°‘å¤±è´¥    | -10  |
| 3 è¿èƒœåŠ æˆ  | +5   |
| 5 è¿èƒœåŠ æˆ  | +10  |
| 10 è¿èƒœåŠ æˆ | +20  |

## ğŸ” å…¬å¹³æ€§ä¿è¯

### çœŸéšæœºå‘ç‰Œ

æœ¬é¡¹ç›®ä½¿ç”¨ Go æ ‡å‡†åº“çš„ `crypto/rand` åŒ…è¿›è¡Œå‘ç‰Œï¼Œè¿™æ˜¯ä¸€ä¸ªåŠ å¯†çº§éšæœºæ•°ç”Ÿæˆå™¨ï¼ˆCSPRNGï¼‰ï¼Œå…¶éšæœºæ€§è´¨é‡è¿œé«˜äºæ™®é€šçš„ä¼ªéšæœºæ•°ç”Ÿæˆå™¨ã€‚

**å‘ç‰Œæµç¨‹**ï¼š

1. åˆ›å»º 54 å¼ ç‰Œçš„æ ‡å‡†ç‰Œç»„
2. ä½¿ç”¨ Fisher-Yates æ´—ç‰Œç®—æ³• + `crypto/rand` è¿›è¡Œæ´—ç‰Œ
3. æŒ‰é¡ºåºå‘ç‰Œï¼šæ¯ä½ç©å®¶ 17 å¼ ï¼Œå‰©ä½™ 3 å¼ ä½œä¸ºåº•ç‰Œ
4. **æ— ä»»ä½•åŸºäºç©å®¶æ•°æ®çš„ç‰Œé¢è°ƒæ•´**

**ä»£ç ä½ç½®**ï¼š`internal/game/deck.go`

```go
// ä½¿ç”¨åŠ å¯†çº§éšæœºæ•°ç”Ÿæˆå™¨æ´—ç‰Œ
func shuffle(cards []Card) {
    for i := len(cards) - 1; i > 0; i-- {
        j := cryptoRandInt(i + 1)
        cards[i], cards[j] = cards[j], cards[i]
    }
}
```

### å…¬å¹³åŒ¹é…

**å¿«é€ŸåŒ¹é…**ï¼š

- ä½¿ç”¨ Redis é˜Ÿåˆ—å®ç°å…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰åŒ¹é…
- ä¸è€ƒè™‘ç©å®¶çš„èƒœç‡ã€æ®µä½ã€æ¸¸æˆæ—¶é•¿ã€è´¦æˆ·ä½™é¢ç­‰ä»»ä½•å› ç´ 
- ä»…æŒ‰ç…§è¿›å…¥é˜Ÿåˆ—çš„æ—¶é—´é¡ºåºè¿›è¡ŒåŒ¹é…

**æˆ¿é—´åŒ¹é…**ï¼š

- ç©å®¶å¯è‡ªç”±åˆ›å»ºæˆ–åŠ å…¥æˆ¿é—´
- å®Œå…¨ç”±ç©å®¶æ§åˆ¶ï¼ŒæœåŠ¡å™¨ä¸å¹²é¢„

**ä»£ç ä½ç½®**ï¼š`internal/network/server/matcher.go`

### å¼€æºå®¡è®¡

æ‰€æœ‰æ ¸å¿ƒé€»è¾‘ä»£ç å®Œå…¨å¼€æºï¼Œæ¬¢è¿ç¤¾åŒºå®¡è®¡ï¼š

- å‘ç‰Œç®—æ³•ï¼š`internal/game/deck.go`
- åŒ¹é…é€»è¾‘ï¼š`internal/network/server/matcher.go`
- æ¸¸æˆè§„åˆ™ï¼š`internal/game/rules.go`

å¦‚æœä½ å‘ç°ä»»ä½•å¯èƒ½å½±å“å…¬å¹³æ€§çš„ä»£ç ï¼Œæ¬¢è¿æäº¤ Issue æˆ– Pull Requestã€‚

## Todo

- [ ] ä½¿ç”¨ **GarageBand (åº“ä¹é˜Ÿ)** æˆ–å…¶ä»–éŸ³ä¹åˆ¶ä½œå·¥å…·ä¸ºæ¸¸æˆæ·»åŠ èƒŒæ™¯éŸ³ä¹å’ŒéŸ³æ•ˆ
- [ ] ç­‰å¾… Docker Hardened Images å–æ¶ˆæ‹‰å–éªŒè¯å’Œæ”¯æŒ debug åï¼Œå‡çº§åˆ° DHI
- [ ] æ›´åŠ æ™ºèƒ½çš„ AI å‡ºç‰Œç­–ç•¥

## é¸£è°¢

- [Google Cloud Compute Engine](https://cloud.google.com/compute) æä¾›è®¡ç®—èµ„æº
- [Cloudflare](https://www.cloudflare.com/) æä¾› CDN æœåŠ¡
- [Flaticon](https://www.flaticon.com/) æä¾›æ¸¸æˆå›¾æ ‡

## ğŸ¤ è´¡çŒ®

æ¬¢è¿è´¡çŒ®ä»£ç ã€æŠ¥å‘Šé—®é¢˜æˆ–æå‡ºå»ºè®®ï¼

---

<div align="center">

**è®©æ–—åœ°ä¸»å›å½’çº¯ç²¹ - æ— æ§ç‰Œï¼ŒçœŸå…¬å¹³**

Made with â¤ï¸ by [palemoky](https://github.com/palemoky)

</div>
